{"ast":null,"code":"import _defineProperty from \"/home/thevpaliy/projects/slack-temp/slack/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/thevpaliy/projects/slack-temp/slack/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar initialState = {\n  people: [],\n  rooms: [],\n  isLoading: true\n};\n\nvar pushItem = function pushItem(state, action, newItem) {\n  var items = state[action.key].slice();\n  items.splice(action.index, 0, newItem);\n  return _objectSpread({}, state, _defineProperty({}, action.key, items));\n};\n\nvar fetchContacts = function fetchContacts() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'contacts-start':\n      return _objectSpread({}, state, {\n        isLoading: true\n      });\n\n    case 'contacts-finish':\n      return _objectSpread({}, state, {\n        isLoading: false,\n        rooms: action.rooms,\n        people: action.people\n      });\n\n    case 'delete-user-start':\n      return _objectSpread({}, state, {\n        people: state.people.filter(function (user) {\n          return user.id !== action.user.id;\n        })\n      });\n\n    case 'select-chat':\n      return _objectSpread({}, state, {\n        people: state.people.map(function (user) {\n          return _objectSpread({}, user, {\n            active: user.id === action.id\n          });\n        }),\n        rooms: state.rooms.map(function (room) {\n          return _objectSpread({}, room, {\n            active: room.id === action.id\n          });\n        })\n      });\n\n    case 'create-room':\n      var rooms = state.rooms.slice();\n      rooms.push({\n        id: 10,\n        roomName: action.name\n      });\n      return _objectSpread({}, state, {\n        rooms: rooms\n      });\n\n    case 'delete-room-start':\n      return _objectSpread({}, state, {\n        rooms: state.rooms.filter(function (room) {\n          return room.id !== action.room.id;\n        })\n      });\n\n    case 'delete-room-failed':\n      action.key = 'rooms';\n      return pushItem(state, action, action.room);\n\n    case 'delete-user-failed':\n      action.key = 'people';\n      return pushItem(state, action, action.user);\n\n    default:\n      return state;\n  }\n};\n\nexport default fetchContacts;","map":{"version":3,"sources":["/home/thevpaliy/projects/slack-temp/slack/src/reducers/contactsReducer.js"],"names":["initialState","people","rooms","isLoading","pushItem","state","action","newItem","items","key","slice","splice","index","fetchContacts","type","filter","user","id","map","active","room","push","roomName","name"],"mappings":";;AACA,IAAMA,YAAY,GAAG;AACnBC,EAAAA,MAAM,EAAE,EADW;AAEnBC,EAAAA,KAAK,EAAE,EAFY;AAGnBC,EAAAA,SAAS,EAAE;AAHQ,CAArB;;AAMA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAQC,MAAR,EAAgBC,OAAhB,EAA4B;AAC3C,MAAMC,KAAK,GAAGH,KAAK,CAACC,MAAM,CAACG,GAAR,CAAL,CAAkBC,KAAlB,EAAd;AACAF,EAAAA,KAAK,CAACG,MAAN,CAAaL,MAAM,CAACM,KAApB,EAA2B,CAA3B,EAA8BL,OAA9B;AACA,2BACKF,KADL,sBAEGC,MAAM,CAACG,GAFV,EAEgBD,KAFhB;AAID,CAPD;;AASA,IAAMK,aAAa,GAAG,SAAhBA,aAAgB,GAAgC;AAAA,MAA/BR,KAA+B,uEAAzBL,YAAyB;AAAA,MAAXM,MAAW;;AACpD,UAAQA,MAAM,CAACQ,IAAf;AACE,SAAK,gBAAL;AACE,+BAAWT,KAAX;AAAkBF,QAAAA,SAAS,EAAC;AAA5B;;AACF,SAAK,iBAAL;AACE,+BACKE,KADL;AAEEF,QAAAA,SAAS,EAAE,KAFb;AAGED,QAAAA,KAAK,EAAEI,MAAM,CAACJ,KAHhB;AAIED,QAAAA,MAAM,EAAEK,MAAM,CAACL;AAJjB;;AAMF,SAAK,mBAAL;AACE,+BACKI,KADL;AAEEJ,QAAAA,MAAM,EAAEI,KAAK,CAACJ,MAAN,CAAac,MAAb,CACN,UAAAC,IAAI;AAAA,iBAAIA,IAAI,CAACC,EAAL,KAAYX,MAAM,CAACU,IAAP,CAAYC,EAA5B;AAAA,SADE;AAFV;;AAMF,SAAK,aAAL;AACE,+BACKZ,KADL;AAEEJ,QAAAA,MAAM,EAAEI,KAAK,CAACJ,MAAN,CAAaiB,GAAb,CACN,UAAAF,IAAI;AAAA,mCAASA,IAAT;AAAeG,YAAAA,MAAM,EAAEH,IAAI,CAACC,EAAL,KAAYX,MAAM,CAACW;AAA1C;AAAA,SADE,CAFV;AAKEf,QAAAA,KAAK,EAAEG,KAAK,CAACH,KAAN,CAAYgB,GAAZ,CACL,UAAAE,IAAI;AAAA,mCAASA,IAAT;AAAeD,YAAAA,MAAM,EAAEC,IAAI,CAACH,EAAL,KAAYX,MAAM,CAACW;AAA1C;AAAA,SADC;AALT;;AASF,SAAK,aAAL;AACE,UAAMf,KAAK,GAAGG,KAAK,CAACH,KAAN,CAAYQ,KAAZ,EAAd;AACAR,MAAAA,KAAK,CAACmB,IAAN,CAAW;AACTJ,QAAAA,EAAE,EAAE,EADK;AAETK,QAAAA,QAAQ,EAAEhB,MAAM,CAACiB;AAFR,OAAX;AAIA,+BAAYlB,KAAZ;AAAmBH,QAAAA,KAAK,EAALA;AAAnB;;AACF,SAAK,mBAAL;AACE,+BACKG,KADL;AAEEH,QAAAA,KAAK,EAAEG,KAAK,CAACH,KAAN,CAAYa,MAAZ,CACL,UAAAK,IAAI;AAAA,iBAAIA,IAAI,CAACH,EAAL,KAAYX,MAAM,CAACc,IAAP,CAAYH,EAA5B;AAAA,SADC;AAFT;;AAMF,SAAK,oBAAL;AACEX,MAAAA,MAAM,CAACG,GAAP,GAAa,OAAb;AACA,aAAOL,QAAQ,CAACC,KAAD,EAAQC,MAAR,EAAgBA,MAAM,CAACc,IAAvB,CAAf;;AACF,SAAK,oBAAL;AACEd,MAAAA,MAAM,CAACG,GAAP,GAAa,QAAb;AACA,aAAOL,QAAQ,CAACC,KAAD,EAAQC,MAAR,EAAgBA,MAAM,CAACU,IAAvB,CAAf;;AACF;AACE,aAAOX,KAAP;AAhDJ;AAkDD,CAnDD;;AAqDA,eAAeQ,aAAf","sourcesContent":["\nconst initialState = {\n  people: [],\n  rooms: [],\n  isLoading: true\n}\n\nconst pushItem = (state, action, newItem) => {\n  const items = state[action.key].slice()\n  items.splice(action.index, 0, newItem)\n  return {\n    ...state,\n    [action.key]: items\n  }\n}\n\nconst fetchContacts = (state=initialState, action) => {\n  switch (action.type) {\n    case 'contacts-start':\n      return {...state, isLoading:true }\n    case 'contacts-finish':\n      return {\n        ...state,\n        isLoading: false,\n        rooms: action.rooms,\n        people: action.people\n      }\n    case 'delete-user-start':\n      return {\n        ...state,\n        people: state.people.filter(\n          user => user.id !== action.user.id\n        )\n      }\n    case 'select-chat':\n      return {\n        ...state,\n        people: state.people.map(\n          user => ({...user, active: user.id === action.id })\n        ),\n        rooms: state.rooms.map(\n          room => ({...room, active: room.id === action.id })\n        )\n      }\n    case 'create-room':\n      const rooms = state.rooms.slice()\n      rooms.push({\n        id: 10,\n        roomName: action.name\n      })\n      return { ...state, rooms }\n    case 'delete-room-start':\n      return {\n        ...state,\n        rooms: state.rooms.filter(\n          room => room.id !== action.room.id\n        )\n      }\n    case 'delete-room-failed':\n      action.key = 'rooms'\n      return pushItem(state, action, action.room)\n    case 'delete-user-failed':\n      action.key = 'people'\n      return pushItem(state, action, action.user)\n    default:\n      return state\n  }\n}\n\nexport default fetchContacts\n"]},"metadata":{},"sourceType":"module"}